# ExamMaster - 智能刷题考试系统

<div align="center">

一个功能完整的在线刷题和考试管理系统，支持题库管理、智能练习、模拟考试、AI讲解、讨论社区等功能。

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Node](https://img.shields.io/badge/node-%3E%3D16.0.0-brightgreen.svg)](https://nodejs.org/)
[![React](https://img.shields.io/badge/react-19.2.3-blue.svg)](https://reactjs.org/)
[![Version](https://img.shields.io/badge/version-2.0.0-orange.svg)](https://github.com)

[技术文档](技术文档.md) | [更新日志](#更新日志)

</div>

## ✨ 核心功能

### 🎓 学员端功能

#### 📚 智能练习系统
- **多种练习模式**
  - 顺序练习 - 按题目顺序依次练习
  - 随机练习 - 打乱题目顺序练习
  - 错题练习 - 针对性复习错题
  - 收藏练习 - 复习收藏的重点题目
  - **智能复习** - SRS间隔重复算法，科学安排复习计划 ✨
- **题型支持**
  - 单选题、多选题、判断题
  - 填空题、简答题 ✨ 新增
- **进度保存** - 自动保存答题进度，随时继续
- **题型筛选** - 按题型分类练习

#### 🎯 模拟考试系统
- **真实考试环境** - 计时、自动评分
- **灵活配置** - 自定义题型数量和考试时长
- **成绩分析** - 详细的错题统计和用时分析
- **历史记录** - 完整的考试历史和成绩追踪

#### 🛠️ 实操练习
- **实操题目** - 支持多部分复杂题目
- **AI 评价** - 智能评价实操答案
- **历史记录** - 查看历史提交记录

#### 🤖 AI 智能助手
- **多AI服务商** - 支持 DeepSeek、OpenAI、Claude、Gemini、文心一言 ✨
- **题目讲解** - AI 智能讲解题目和答案
- **语音朗读** - TTS 文字转语音，支持语速和音色调节
- **自动评分** - 简答题 AI 自动评分
- **个性化配置** - 支持个人 API Key，优先级高于全局配置

#### 💬 讨论社区 ✨ 新增
- **发起讨论** - 创建讨论话题，可关联题目
- **评论互动** - 多级评论，支持回复
- **点赞功能** - 为讨论和评论点赞
- **富文本编辑** - 支持富文本内容编辑

#### 📊 学习统计
- **数据分析** - 答题数量、正确率、错题统计
- **学习趋势** - 可视化学习进度图表
- **每日目标** - 设置和追踪每日学习目标
- **在线时长** - 记录学习时间

#### 📝 辅助功能
- **错题本** - 自动收集错题，针对性练习
- **收藏夹** - 收藏重点题目
- **笔记功能** - 为题目添加个人笔记
- **个人资料** - 自定义头像、昵称等信息

### 👨‍💼 管理员功能

#### 📚 题库管理
- **题库创建** - 创建、编辑、删除题库
- **分类管理** - 支持分类和难度等级
- **题目管理** - 支持5种题型的题目管理
- **批量导入** - CSV 格式批量导入题目
- **标签系统** - 题目标签分类和管理 ✨ 新增
- **分值配置** - 自定义各题型分值
- **去重检测** - 自动检测重复题目

#### 👥 用户管理
- **学员管理** - 账号管理、权限分配、题库授权
- **管理员管理** - 多级权限管理（超级管理员、普通管理员）
- **权限系统** - 细粒度权限控制
  - 数据看板、学员管理、题库管理
  - 考试发布、实操发布、督学管理
  - 讨论管理、标签管理、系统设置
- **自定义字段** - 自定义学员信息字段
- **批量操作** - 批量导入、删除、权限设置

#### 📋 考试管理
- **考试发布** - 创建和发布考试
- **出题策略** - 随机抽题或手动选题
- **灵活配置** - 考试时长、及格分数、题型数量
- **可见性控制** - 控制考试对学员的可见性
- **时间限制** - 设置考试开始和结束时间
- **成绩统计** - 考试通过率、平均分等统计

#### 🛠️ 实操管理
- **实操题创建** - 创建和管理实操题目
- **多部分题目** - 支持复杂的实操题结构
- **提交记录** - 查看学员提交记录

#### 💬 讨论管理 ✨ 新增
- **内容审核** - 置顶、隐藏、删除讨论
- **评论管理** - 管理评论内容
- **数据统计** - 讨论活跃度统计

#### 🏷️ 标签管理 ✨ 新增
- **标签创建** - 创建题目标签，自定义颜色
- **标签编辑** - 修改标签名称和颜色
- **标签合并** - 合并重复标签
- **使用统计** - 显示标签使用次数

#### 📊 数据统计
- **数据看板** - 可视化数据展示
- **学员统计** - 答题数据、正确率分析
- **考试分析** - 考试通过率、成绩分布
- **活跃度追踪** - 学员活跃度和在线时长
- **登录日志** - 用户登录历史记录

#### ⚙️ 系统设置 ✨ 全面升级
- **主题定制**
  - 页面标签标题
  - Logo 标识（图标+文字 或 上传图片）
  - 登录页标语（PC端/移动端）
- **内容管理**
  - 首页滚动公告
  - 轮播横幅管理（支持富文本详情）
  - 视频课程管理
  - 首页布局配置
- **系统安全**
  - 数据维护与灾备
  - 管理员密码更新
  - 数据导入导出
- **智能化配置**
  - AI 模型选择（5个服务商）
  - 自动评分规则
  - TTS 语音设置

## 🚀 快速开始

### 环境要求
- Node.js >= 16.0.0
- npm 或 yarn

### 本地开发

1. **克隆项目**
```bash
git clone <repository-url>
cd ExamMaster
```

2. **安装依赖**
```bash
npm install
```

3. **配置环境变量**
```bash
# 复制环境变量模板
cp .env.example .env.local

# 编辑 .env.local
# JWT_SECRET=your-secret-key
# PORT=3001
```

4. **启动后端服务**
```bash
node server.js
```

5. **启动前端开发服务器**（新终端）
```bash
npm run dev
```

6. **访问系统**
```
前端: http://localhost:5173
后端: http://localhost:3001
```

### 默认管理员账号
```
账号: admin
密码: admin
```
⚠️ **首次登录后请立即修改密码！**

## 📦 技术栈

### 前端
- React 19.2.3 + TypeScript
- Vite 6.4.1
- Tailwind CSS 3.4.1
- Zustand (状态管理)
- Recharts (图表)
- Quill (富文本编辑)

### 后端
- Node.js + Express
- SQLite3 (数据库)
- JWT (认证)
- bcryptjs (密码加密)

### AI 集成
- DeepSeek API (推荐)
- OpenAI API
- Claude API
- Gemini API
- 文心一言 API

## 📝 题目导入格式

系统支持CSV格式批量导入题目，支持5种题型：

```csv
题型,题干,选项(用|分隔),答案,解析
SINGLE,下列哪个协议用于加密网页传输？,HTTP|FTP|HTTPS|SMTP,C,HTTPS是HTTP的安全版本
MULTIPLE,以下哪些是常见的网络攻击方式？,DDoS攻击|SQL注入|XSS跨站脚本|钓鱼攻击,ABCD,这些都是常见攻击方式
JUDGE,防火墙主要用于监控和过滤进出网络的数据包。,,A,防火墙是网络安全的第一道防线
FILL_IN_BLANK,HTTP的默认端口是____。,,80,HTTP协议使用80端口
SHORT_ANSWER,请简述HTTPS的工作原理。,,HTTPS通过SSL/TLS协议对HTTP通信进行加密...,简答题答案
```

**支持特性**：
- 5种题型：单选、多选、判断、填空、简答
- 2-8个选项（单选/多选）
- 自动去重检测
- 批量导入

## 🎨 特色功能

### 🧠 SRS 智能复习算法
基于艾宾浩斯遗忘曲线的间隔重复系统：
- **科学复习** - 根据掌握程度自动安排复习时间
- **三种评价** - 很难/重来、已掌握、太简单了
- **动态调整** - 根据答题表现调整复习间隔
- **今日复习** - 自动筛选今日待复习题目

### 🤖 多AI服务商支持
灵活选择AI服务商，满足不同需求：
- **DeepSeek** - 性价比高，推荐使用
- **OpenAI** - GPT-4/3.5，支持TTS
- **Claude** - Anthropic，高质量对话
- **Gemini** - Google，支持TTS
- **文心一言** - 百度，支持TTS

### 🏷️ 标签系统
强大的题目分类和管理：
- **自定义标签** - 创建任意标签，自定义颜色
- **标签筛选** - 按标签快速筛选题目
- **标签统计** - 显示标签使用次数
- **标签合并** - 合并重复标签

### 💬 讨论社区
促进学习交流和互动：
- **话题讨论** - 发起学习话题讨论
- **题目关联** - 讨论可关联具体题目
- **多级评论** - 支持评论回复
- **富文本编辑** - 支持格式化内容
- **点赞互动** - 为优质内容点赞

### 🎨 主题定制
打造专属学习平台：
- **Logo 自定义** - 上传自定义Logo图片
- **标语设置** - 自定义登录页标语
- **横幅管理** - 首页轮播横幅
- **布局配置** - 自定义首页模块显示

## 🔧 开发命令

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 启动后端服务
node server.js

# 构建生产版本
npm run build

# 预览生产构建
npm run preview
```

## 🚀 生产部署

### 快速部署
```bash
# 1. 构建前端
npm run build

# 2. 上传到服务器
scp -r dist server.js package.json root@your-server:/*/

# 3. 安装依赖
ssh root@your-server "cd /* && npm install --production"

# 4. 启动服务
ssh root@your-server "cd /* && pm2 start ecosystem.config.cjs"
```

### 详细部署
参考 [技术文档.md](技术文档.md) 获取完整部署指南，包括：
- Nginx 配置
- PM2 进程管理
- SSL 证书配置
- 数据库备份策略

## 🔒 安全建议

1. ⚠️ **修改默认密码** - 首次登录后立即修改
2. 🔒 **配置HTTPS** - 生产环境务必启用SSL
3. 📦 **定期备份** - 设置数据库自动备份
4. 🔄 **更新依赖** - 定期更新系统和依赖包
5. 🔑 **保护密钥** - 妥善保管 API Key 和 JWT Secret

## 📊 项目结构

```
EduMaster_Sqlite/
├── pages/              # 页面组件
│   ├── Admin/         # 管理员页面
│   │   ├── Dashboard.tsx
│   │   ├── BankManager.tsx
│   │   ├── StudentManager.tsx
│   │   ├── SystemSettings.tsx
│   │   └── ...
│   └── Student/       # 学员页面
│       ├── Home.tsx
│       ├── Practice.tsx
│       ├── PracticeMode.tsx
│       ├── Exams.tsx
│       ├── Discussions.tsx
│       └── ...
├── components/        # 公共组件
│   ├── Layout.tsx
│   ├── TagManager.tsx
│   ├── TagSelector.tsx
│   ├── RichTextEditor.tsx
│   ├── DiscussionList.tsx
│   └── ...
├── utils/             # 工具函数
│   ├── deepseek.ts
│   └── questionValidation.js
├── docs/              # 项目文档
├── server.js          # 后端服务
├── store.ts           # 状态管理
├── types.ts           # TypeScript 类型定义
└── README.md          # 项目说明
```

## 📚 文档

- [技术文档.md](技术文档.md) - 完整的技术文档

## 🎯 系统要求

### 最低配置
- CPU: 2核
- 内存: 2GB
- 存储: 20GB
- 操作系统: Ubuntu 20.04+ / CentOS 7+ / Debian 10+

### 推荐配置
- CPU: 4核
- 内存: 4GB
- 存储: 50GB
- Node.js: 16.0.0+

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

[MIT License](LICENSE)

## 📞 支持

- 🌐 在线演示: 
- 📖 技术文档: [技术文档.md](技术文档.md)
- 📧 问题反馈: 通过系统管理员

## 更新日志

### v2.0.0 (2026-01-09)

#### ✨ 新增功能
- 填空题和简答题支持
- 题目标签管理系统
- 讨论社区功能（发帖、评论、点赞）
- SRS 智能复习算法
- 多 AI 服务商支持（DeepSeek、OpenAI、Claude、Gemini、文心一言）
- 富文本编辑器
- 主题定制功能（Logo上传、标语设置）
- 系统设置分类管理
- 用户数据重置功能
- 自定义字段功能

#### 🔧 优化改进
- 权限管理系统优化
- 练习模式交互优化
- 移动端适配优化
- 导航栏菜单优化
- 标签显示优化
- 数据加载性能优化

#### 🐛 问题修复
- 修复标签创建后不显示的问题
- 修复讨论详情加载错误
- 修复Logo上传功能
- 修复构建警告
- 修复智能复习退出返回位置
- 修复多个已知问题

### v1.0.0 (2026-01-07)
- 🎉 初始版本发布
- 基础题库管理功能
- 练习和考试功能
- 实操题功能
- AI 讲解功能
- 用户权限管理

---

**最后更新**: 2026-01-09  
**版本**: 2.0.0  
**维护者**: shijingtian 开发团队

<div align="center">

Made with ❤️ by EduMaster Team

</div>
