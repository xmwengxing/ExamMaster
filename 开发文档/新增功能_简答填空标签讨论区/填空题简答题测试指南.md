# 填空题和简答题测试指南

## 🚀 快速开始

### 前提条件
- ✅ 后端服务器运行中 (localhost:3001)
- ✅ 前端开发服务器需要启动
- ✅ 已有管理员账号（admin/admin）

---

## 📝 测试步骤

### 步骤1：启动前端开发服务器

```bash
npm run dev
# 或
npm start
```

### 步骤2：登录系统

1. 打开浏览器访问 `http://localhost:5173`（或你的前端端口）
2. 使用管理员账号登录：
   - 账号：admin
   - 密码：admin
   - 角色：管理员

### 步骤3：创建填空题

1. 进入"题库管理"
2. 选择一个题库（或创建新题库）
3. 点击"添加题目"
4. 选择题型：**填空题**
5. 填写题目内容（使用 `{{blank1}}`, `{{blank2}}` 作为占位符）
   ```
   示例：JavaScript是一种{{blank1}}语言，常用于{{blank2}}开发。
   ```
6. 配置空白：
   - 空白1：
     - ID: blank1
     - 位置: 1
     - 可接受答案: 脚本, 编程, 动态
     - 区分大小写: 否
   - 空白2：
     - ID: blank2
     - 位置: 2
     - 可接受答案: Web, 网页, 前端
     - 区分大小写: 否
7. 填写解析
8. 保存题目

### 步骤4：创建简答题

1. 在题库管理中点击"添加题目"
2. 选择题型：**简答题**
3. 填写题目内容
   ```
   示例：请简述JavaScript的闭包概念及其应用场景。
   ```
4. 填写参考答案
   ```
   示例：闭包是指函数可以访问其外部作用域的变量，即使外部函数已经执行完毕。
   闭包的应用场景包括：
   1. 数据封装和私有变量
   2. 函数工厂
   3. 回调函数和事件处理
   ```
5. 启用AI评分：✓
6. 填写解析
7. 保存题目

### 步骤5：测试填空题

1. 切换到学员角色（或使用学员账号登录）
2. 进入"练习模式"
3. 选择包含填空题的题库
4. 开始练习
5. 遇到填空题时：
   - 填写所有空白
   - 点击"提交答案"
   - 查看评分结果
   - 验证：
     - ✓ 每个空白显示对错
     - ✓ 显示总分和百分比
     - ✓ 错误空白显示正确答案

### 步骤6：测试简答题

1. 在练习模式中遇到简答题时：
   - 在文本框中输入答案
   - 观察字数统计
   - 点击"提交答案"
   - 等待AI评分（可能需要几秒）
   - 查看评分结果：
     - ✓ 显示分数
     - ✓ 显示AI反馈
     - ✓ 显示改进建议

---

## 🧪 测试用例

### 填空题测试用例

#### 用例1：全部正确
- **输入**：blank1="脚本", blank2="web"
- **预期**：100分，2/2正确，绿色背景

#### 用例2：部分正确
- **输入**：blank1="脚本", blank2="后端"
- **预期**：50分，1/2正确，黄色背景，显示正确答案

#### 用例3：大小写测试
- **输入**：blank1="脚本", blank2="WEB"
- **预期**：100分（大小写不敏感）

#### 用例4：空格测试
- **输入**：blank1="  脚本  ", blank2=" web "
- **预期**：100分（自动去除空格）

#### 用例5：未填写完整
- **输入**：blank1="脚本", blank2=""
- **预期**：提示"请填写所有空白"

### 简答题测试用例

#### 用例1：完整答案
- **输入**：详细的闭包解释（100-200字）
- **预期**：高分（80-100），正面反馈

#### 用例2：简短答案
- **输入**：简单的一句话解释
- **预期**：中等分数（60-80），建议补充内容

#### 用例3：错误答案
- **输入**：完全不相关的内容
- **预期**：低分（0-60），指出错误

#### 用例4：空答案
- **输入**：空白
- **预期**：提示"请输入答案"

---

## 🐛 常见问题

### 问题1：填空题评分失败
**症状**：点击提交后显示"评分失败"

**可能原因**：
- 后端服务器未运行
- 题目ID不存在
- 网络连接问题

**解决方法**：
1. 检查后端服务器状态
2. 查看浏览器控制台错误
3. 检查网络请求

### 问题2：简答题AI评分失败
**症状**：点击提交后显示"评分失败"

**可能原因**：
- DeepSeek API Key未配置
- API调用失败
- 网络问题

**解决方法**：
1. 在系统设置中配置DeepSeek API Key
2. 检查API Key是否有效
3. 查看后端日志

### 问题3：填空题不显示
**症状**：练习模式中看不到填空题

**可能原因**：
- 题目类型未正确设置
- blanks配置缺失
- 前端代码未更新

**解决方法**：
1. 检查题目类型是否为"FILL_IN_BLANK"
2. 检查blanks字段是否有数据
3. 刷新页面

### 问题4：简答题不显示AI评分结果
**症状**：提交后没有显示AI评分

**可能原因**：
- aiGradingEnabled未启用
- referenceAnswer缺失
- API调用失败

**解决方法**：
1. 检查题目是否启用了AI评分
2. 检查是否有参考答案
3. 查看控制台错误

---

## 📊 测试检查清单

### 填空题功能
- [ ] 题目正确显示
- [ ] 输入框数量正确
- [ ] 可以输入答案
- [ ] 提交按钮可点击
- [ ] 显示加载状态
- [ ] 评分结果正确
- [ ] 对错标识清晰
- [ ] 显示可接受答案
- [ ] 部分得分计算正确
- [ ] 大小写不敏感工作
- [ ] 空格自动去除

### 简答题功能
- [ ] 题目正确显示
- [ ] 文本框可输入
- [ ] 字数统计准确
- [ ] AI标识显示
- [ ] 提交按钮可点击
- [ ] 显示加载状态
- [ ] AI评分结果显示
- [ ] 反馈文字清晰
- [ ] 改进建议显示
- [ ] 参考答案可查看

### 用户体验
- [ ] 界面美观
- [ ] 交互流畅
- [ ] 加载动画自然
- [ ] 错误提示友好
- [ ] 移动端适配良好

---

## 🔍 调试技巧

### 1. 查看网络请求
打开浏览器开发者工具 → Network标签
- 查看 `/api/questions/grade-fill-blank` 请求
- 查看 `/api/ai/grade-answer` 请求
- 检查请求参数和响应

### 2. 查看控制台日志
打开浏览器开发者工具 → Console标签
- 查看错误信息
- 查看API调用日志
- 查看状态变化

### 3. 查看后端日志
在后端服务器终端查看：
- API请求日志
- 评分过程日志
- 错误信息

### 4. 使用React DevTools
安装React DevTools扩展
- 查看组件状态
- 查看props传递
- 调试状态更新

---

## 📸 预期效果截图说明

### 填空题界面
```
┌─────────────────────────────────────┐
│ JavaScript是一种____语言，常用于____开发。│
│                                     │
│ 空白 1: [脚本____________]  ✓ 正确  │
│ 空白 2: [web_____________]  ✓ 正确  │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 得分：100/100                   │ │
│ │ 正确：2/2 (100%)                │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### 简答题界面
```
┌─────────────────────────────────────┐
│ 请简述JavaScript的闭包概念及其应用场景。│
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 闭包是指函数可以访问其外部作用域的│ │
│ │ 变量，即使外部函数已经执行完毕...│ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│ 字数：156  🪄 AI评分已启用          │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 🪄 AI评分结果                   │ │
│ │ 85分                            │ │
│ │ 答案整体正确，要点完整...        │ │
│ │                                 │ │
│ │ 改进建议：                       │ │
│ │ • 可以补充更多应用场景           │ │
│ │ • 建议添加代码示例               │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

---

## ✅ 测试完成标准

测试通过的标准：
1. ✅ 所有测试用例通过
2. ✅ 无控制台错误
3. ✅ UI显示正常
4. ✅ 交互流畅
5. ✅ 评分结果准确
6. ✅ 错误处理正确

---

## 📞 需要帮助？

如果遇到问题：
1. 查看本文档的"常见问题"部分
2. 查看浏览器控制台错误
3. 查看后端服务器日志
4. 检查API测试报告.md中的API测试结果

---

祝测试顺利！🎉
